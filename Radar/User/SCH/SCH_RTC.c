/*
*********************************************************************************************************
*                                                SCH_RTC
*
* File    : SCH_RTC.c
* By      : XH
* Version : V1.4
*
* Comments:
* ---------------
*     
*********************************************************************************************************
*/

/*
*********************************************************************************************************
*                                            INCLUDE FILES
*********************************************************************************************************
*/

#include "SCH_Core.h"
//#include "Message.h"

/*
*********************************************************************************************************
*                                            LOCAL DEFINES
*********************************************************************************************************
*/



/*
*********************************************************************************************************
*                                           LOCAL CONSTANTS
*********************************************************************************************************
*/



/*
*********************************************************************************************************
*                                          LOCAL DATA TYPES
*********************************************************************************************************
*/



/*
*********************************************************************************************************
*                                            LOCAL TABLES
*********************************************************************************************************
*/



/*
*********************************************************************************************************
*                                       LOCAL GLOBAL VARIABLES
*********************************************************************************************************
*/

SCH_RTC_Type	SCH_RTC;

/*
*********************************************************************************************************
*                                      LOCAL FUNCTION PROTOTYPES
*********************************************************************************************************
*/


void SCH_RTC_Init(INT32U hour, INT8U minute, INT8U second)
{
	SCH_RTC.hour   = hour;
	SCH_RTC.minute = minute;
	SCH_RTC.second = second;
	SCH_RTC.msec   = 0;
}

void SCH_RTC_Update(void)
{
//	MSG_Cache_Type msg;

	SCH_RTC.msec++;

	if(SCH_RTC.msec > (SCH_CFG_TICK_RATE_HZ - 1))	//1S
	{
		SCH_RTC.msec = 0;
		
//		msg.Type = MsgType_WDG;
//		msg.Value = MsgValue_NULL;
		

//		APP_MessagePost(msg);

		if(++SCH_RTC.second > 59)
		{
			SCH_RTC.second = 0;
			SCH_RTC.minute++;
		}
		
		if(SCH_RTC.minute > 59)
		{
			SCH_RTC.minute = 0;
			SCH_RTC.hour++;
		}
	}
}

SCH_RTC_Type SCH_Get_RTC(void)
{
	SCH_RTC_Type schTime;
	
	schTime = SCH_RTC;
	schTime.msec = 10 * schTime.msec;
	
	return schTime; 
}













